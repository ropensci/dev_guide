# Guía de colaboración {#collaboration}

```{block, type="summaryblock"}
Tener colaboradores mejorará tu paquete, y si incorporas a algunos de ellos como autores del paquete con [permisos de escritura en el repositorio](https://help.github.com/articles/repository-permission-levels-for-an-organization/), tu paquete se desarrollará de forma más sostenible.
¡También puede ser muy agradable trabajar en equipo!

Este capítulo contiene nuestra orientación para la colaboración, en una [sección sobre cómo hacer que tu repo sea amigable para la contribución y la colaboración](#friendlyfiles) por infraestructura (código de conducta, directrices de contribución, etiquetas issue); y [ una sección sobre cómo colaborar con nuevos contribuyentes](#workingcollaborators), en particular en el contexto de la organización "ropensci" de rOpenSci en GitHub.

Además de estos consejos, en su mayoría técnicos, es importante recordar que hay que ser amable y tener en cuenta la perspectiva de los demás, especialmente cuando sus prioridades difieren de las tuyas.
```

## Haz que tu contribución al repositorio y tu colaboración sean amables {#friendlyfiles}

### Código de conducta {#coc-file}

Tras el traslado a nuestra organización de GitHub, [el Código de Conducta de rOpenSci](https://ropensci.org/code-of-conduct/) se aplicará a tu proyecto.
Por favor, añade este texto al LÉAME

```markdown
Ten en cuenta que este paquete se publica con un [Código de Conducta del Colaborador
Código de Conducta](https://ropensci.org/code-of-conduct/). 
Al
contribuyendo a este proyecto, te comprometes a cumplir sus condiciones.
```

Y eliminar el código de conducta actual del paquete, si lo hubiera.

### Guía de contribución

Puedes utilizar las guías de issue, pull request y de contribución.
Tener un archivo de contribución como `.github/CONTRIBUTING.md` o `docs/CONTRIBUTING.md` es obligatorio.
Una forma fácil de insertar una plantilla para una guía de contribución es la función [`use_tidy_contributing()` de la función `usethis` paquete](https://usethis.r-lib.org/reference/tidyverse.html)que inserta [esta plantilla](https://github.com/r-lib/usethis/blob/main/inst/templates/tidy-contributing.md) como `.github/CONTRIBUTING.md`.
Un ejemplo más extenso es [esta plantilla de Peter Desmet](https://gist.github.com/peterdesmet/e90a1b0dc17af6c12daf6e8b2f044e7c)o las completas páginas wiki de [páginas wiki de GitHub para el paquete mlr3](https://github.com/mlr-org/mlr3/wiki).
Estas y otras plantillas generalmente tendrán que ser modificadas para su uso con un paquete rOpenSci, en particular haciendo referencia y enlazando con nuestro [Código de Conducta](https://ropensci.org/code-of-conduct/)como se describe en otra parte [en este libro](#code-of-conduct).
Modificar una guía de contribución genérica para añadir un toque personal también tiende a hacer que parezca menos genérica y más sincera.
Las preferencias personales en una guía de contribución incluyen

- ¿Preferencias de estilo? Sin embargo, puedes preferir que el estilo sea una configuración (de [lintr](https://github.com/jimhester/lintr), [styler](https://styler.r-lib.org/)) o bien [arreglar el estilo de código tú mismo](https://github.com/rstudio/blogdown/pull/432#pullrequestreview-368391904) especialmente si no utilizas un estilo de código popular como el [estilo de código tidyverse](https://style.tidyverse.org/).

- ¿Infraestructura como roxygen2?

- ¿Preferencias de flujo de trabajo? ¿Edit antes de un PR?

- Una declaración de alcance, como [en el paquete skimr](https://github.com/ropensci/skimr/blob/main/.github/CONTRIBUTING.md#understanding-the-scope-of-skimr)?

- ¿Creación de una cuenta Sandbox? ¿Simulacro en los test? ¿Enlace a documentos externos?

rOpenSci anima además a las guías que contribuyen a incluir una declaración del ciclo de vida que aclare las visiones y expectativas para el desarrollo futuro de su paquete, como [en este ejemplo](https://github.com/ecohealthalliance/fasterize/blob/master/CONTRIBUTING.md#roadmap).
Los paquetes estadísticos deben tener una declaración de ciclo de vida, como se especifica en [*Normas Generales de Estadística* G1.2](https://stats-devguide.ropensci.org/standards.html#documentation).
Ese enlace proporciona una plantilla para una declaración de ciclo de vida sencilla.
Los archivos CONTRIBUTING.md también pueden describir cómo se reconocen las contribuciones (ver [esta sección](#attributions)).

Te animamos a que dirijas las devoluciones que no sean un informe de errores o una solicitud de características a [foro rOpenSci](https://discuss.ropensci.org/)después de asegurarte de que verás esas preguntas en el foro. Los usuarios pueden utilizar el foro para hacer preguntas sobre el uso e informar de sus casos de uso, y puedes suscribirte a categorías y etiquetas individuales para recibir notificaciones sobre tu paquete.  No dudes en mencionar esto en los documentos de tu paquete y/o en la plantilla de directrices/ issue de contribución.  Indica a tus usuarios que etiqueten las publicaciones con el nombre del paquete.

Una vez que una solicitud de extracción está más cerca de ser fusionada, puedes utilizar [un flujo de trabajo de GitHub Actions PR para estilizar el código con styler](https://github.com/r-lib/actions/blob/master/examples/pr-commands.yaml).

### Gestión de issues

Utilizando las funciones de GitHub en torno a los issues puedes ayudar a los posibles colaboradores a encontrarlos, y hacer pública tu hoja de ruta.

#### Plantillas de issue

Puedes utilizar una o varias [plantilla(s) de issue](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository#creating-issue-templates=) para ayudar a los usuarios a rellenar mejor los informes de errores o las peticiones de características.
Cuando hay varias plantillas de issue, los usuarios que hacen clic en la apertura de un nuevo issue ven un menú que guía sus elecciones.

Incluso puedes [configurar una de las opciones](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository#configuring-the-template-chooser=) para que apunte a algún lugar fuera de tu repositorio (por ejemplo, un foro de discusión).

Consulta la [Documentación de GitHub](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository).

#### Etiquetado de issues

Puedes utilizar etiquetas como "se necesita ayuda" y "buen primer issue" para ayudar a los posibles colaboradores, incluidos los novatos, a encontrar tu repo. [Véase el artículo de GitHub](https://help.github.com/articles/helping-new-contributors-find-your-project-with-labels/). También puedes utilizar la etiqueta "Principiante". Consulta [ejemplos de issues para principiantes en todos los repos de ropensci](https://github.com/search?q=user%3Aropensci+user%3Aropenscilabs+label%3ABeginner+state%3Aopen&type=Issues).

#### Anclaje de issues


Puedes [fijar hasta 3 issues por repositorio](https://docs.github.com/en/articles/pinning-an-issue-to-your-repository) que aparecerán en la parte superior de tu gestor de incidencias como bonitas tarjetas de incidencias.
Puede ayudar a anunciar cuáles son tus prioridades.

#### Hitos

Puedes [crear hitos](https://docs.github.com/en/issues/using-labels-and-milestones-to-track-work/about-milestones) y asignarles issues, lo que ayuda a ver lo que planeas para la próxima versión de tu paquete, por ejemplo.

### Comunicación con los usuarios

Puedes dirigir a los usuarios al foro de rOpenSci si lo supervisas, o habilitar [Discusiones de GitHub](https://docs.github.com/en/discussions) para tu repositorio de paquetes.
Cada discusión de GitHub puede convertirse en un issue si es necesario (y al revés, los issues pueden convertirse en discusiones).

## Trabajar con los colaboradores {#workingcollaborators}

Lo primero es lo primero: ¡mantén el contacto con tu repositorio de GitHub!

- no te olvides de [**vigilar tu repositorio de GitHub**](https://docs.github.com/en/github/managing-subscriptions-and-notifications-on-github/managing-subscriptions-for-activity-on-github) para que te notifiquen los issue o pull requests (si trabajas en ráfagas, puedes añadir la información a la guía de contribución).

- no olvides empujar las actualizaciones que tengas localmente.

- desactiva los test que fallan si no puedes arreglarlos, ya que crean ruido en los PR que pueden desconcertar a los nuevos colaboradores.

### Incorporación de colaboradores

No hay una regla general en rOpenSci sobre cómo debes incorporar a los colaboradores. Deberías aumentar sus derechos en el repositorio a medida que ganes confianza, y definitivamente deberías reconocer las contribuciones (ver [esta sección](#attributions)).

Puedes pedir a un nuevo colaborador que haga PRs (ver la siguiente sección para evaluar un PR localmente, es decir, más allá de las comprobaciones de CI) a dev/main y evaluarlos antes de fusionarlos, y después de un tiempo dejar que empujen a main, aunque puede que quieras mantener un sistema de revisión de PRs... ¡incluso para ti mismo una vez que tengas compañeros de equipo!

Jim Hester ofrece un posible modelo de incorporación de colaboradores en [su `lintr` repo](https://github.com/jimhester/lintr/issues/318).

Si tu problema es *reclutar* colaboradores, puedes publicar una convocatoria abierta como la de Jim Hester [en Twitter](https://twitter.com/jimhester_/status/997109466674819074), [GitHub](https://github.com/jimhester/lintr/issues/318)y, como autor de un paquete rOpenSci, puedes pedir ayuda en rOpenSci slack y solicitar al equipo de rOpenSci ideas para reclutar nuevos colaboradores.

### Trabajar con colaboradores (incluido tú mismo) {#gitflow}

[Las ramas](https://happygitwithr.com/git-branches.html) son baratas. Utilízalas mucho cuando desarrolles funciones, pruebes nuevas ideas o arregles problemas.

Una de las ramas es la rama por defecto / principal, en la que, si sigues [desarrollo basado en el tronco](https://www.atlassian.com/continuous-delivery/continuous-integration/trunk-based-development), "fusionas pequeñas y frecuentes actualizaciones".
Ver también [Flujo de GitHub](https://docs.github.com/en/get-started/quickstart/github-flow) y [flujo de GitLab](https://docs.gitlab.com/ee/topics/gitlab_flow.html) docs.
Es posible que quieras emparejar el incremento frecuente de los números de versión (en `DESCRIPTION`).
Un aspecto particular del trabajo con colaboradores es la revisión de pull requests, con algunas orientaciones útiles en

- [El arte de dar y recibir revisiones de código (con gracia), por Alex Hill](https://www.alexandra-hill.com/2018/06/25/the-art-of-giving-and-receiving-code-reviews/)
- [Documentación de GitHub sobre revisiones de PR](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/about-pull-request-reviews)

Para hacer y revisar pull requests recomendamos [explorar las funciones usethis](https://usethis.r-lib.org/articles/pr-functions.html).

### Sé generoso con las atribuciones {#attributions}

Si alguien contribuye a tu repositorio, considera añadirlo en DESCRIPCIÓN, como colaborador ("ctb") para pequeñas contribuciones, autor ("aut") para contribuciones mayores. Tradicionalmente, cuando se cita un paquete en una publicación científica, sólo se enumeran los autores "aut", no los colaboradores "ctb"; y en `pkgdown` los sitios web sólo aparecen los nombres de los "aut" en la página de inicio, y todos los autores aparecen en la página de autores.

Como mínimo, considera la posibilidad de añadir el nombre de los colaboradores cerca de la línea de la función/corrección de errores en [NEWS.md](#news).

Te recomendamos que seas generoso con estos reconocimientos, porque es algo agradable y porque hará que sea más probable que la gente vuelva a contribuir a tu paquete o a otros repos de la organización.

Como recordatorio de [nuestras directrices de empaquetado](#building) si tu paquete fue revisado y crees que tus revisores han hecho una contribución sustancial al desarrollo de tu paquete, puedes incluirlos en el campo `Authors@R` con el tipo de contribuyente revisor (`"rev"`), así

```
    persona("Bea", "Hernández", rol = "rev",
    comment = "Bea revisó el paquete (v. X.X.XX) para rOpenSci, véase <https://github.com/ropensci/software-review/issues/116>"),
```

Sólo incluye a los revisores después de pedirles su consentimiento. Lee más en [esta entrada del blog "Agradeciendo a tus revisores: La gratitud a través de los metadatos semánticos"](https://ropensci.org/blog/2018/03/16/thanking-reviewers-in-metadata/). Ten en cuenta que 'rev' generará una NOTA de CRAN a menos que el paquete esté construido con R v3.5. Asegúrate de que utilizas `roxygen2`de la última versión de CRAN.

Por favor, no incluyas a los editores como colaboradores. ¡Tu participación y contribución a rOpenSci es suficiente agradecimiento!

### Acogida de colaboradores en rOpenSci

Si das a alguien permisos de escritura en el repositorio

- por favor, ponte en contacto con un [miembro del personal](https://ropensci.org/about#team) para que este nuevo colaborador sea **invitado a la organización GitHub "ropensci" de rOpenSci** (en lugar de ser [un colaborador externo](https://help.github.com/articles/repository-permission-levels-for-an-organization/#outside-collaborators))

- ponte en contacto con el gestor de la comunidad de rOpenSci [o con otro miembro del personal](https://ropensci.org/about#team) para que este nuevo colaborador pueda ser **invitado al espacio de trabajo de Slack de rOpenSci**.

## Otros recursos

- Llamada a la comunidad rOpenSci [Configura tu paquete para fomentar una comunidad](https://ropensci.org/commcalls/apr2021-pkg-community/).
- Para reutilizar respuestas amables y habituales, considera las [respuestas guardadas](https://docs.github.com/en/github/writing-on-github/working-with-saved-replies/using-saved-replies).


